webpackJsonp([1],{"/8du":function(t,e){},MAXk:function(t,e){},NAuN:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout"},[e("el-container",{staticStyle:{height:"100%"}},[e("el-header",{staticStyle:{"background-color":"#515a6e"}}),this._v(" "),e("el-container",{staticStyle:{height:"100%"}},[e("el-aside",{attrs:{width:"200px"}},[e("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"100%"},attrs:{"default-active":this.$route.path,router:""}},[e("el-menu-item",{attrs:{index:"/changeHosts"}},[e("i",{staticClass:"el-icon-setting"}),this._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[this._v("host管理")])])],1)],1),this._v(" "),e("el-main",[e("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")({name:"Wrap"},i,!1,function(t){a("MAXk"),a("rFl7"),a("/8du")},"data-v-a54669f8",null).exports,n=a("/ocq"),l=a("lHA8"),o=a.n(l),c=a("Gu7T"),d=a.n(c),u=a("Xxa5"),p=a.n(u),h=a("exGp"),f=a.n(h),v=a("mtWM"),m=a.n(v),g=a("TQvf"),b=a.n(g),y={name:"ChangeHosts",mounted:function(){this.getAllHosts(),new b.a(".copyBtn")},data:function(){return{addModal:!1,editModal:!1,addHostsFileModal:!1,address:"",ip:"",hostsFile:"",id:"",tags:[],addLoading:!1,modal:!1,autoAddress:[],autoIp:[],autoTag:[],data:[]}},methods:{getAllHosts:function(){var t=f()(p.a.mark(function t(){var e,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.get("/api/getAllHosts");case 3:e=t.sent,1===(a=e.data).state?(this.data=a.data,this.updateFilter()):this.$message({type:"error",message:a.msg}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(){return t.apply(this,arguments)}}(),updateFilter:function(){var t=[],e=[],a=[];this.data.map(function(s){t.push(s.address),e.push(s.ip),a=a.concat(s.tags)}),t=[].concat(d()(new o.a(t))),e=[].concat(d()(new o.a(e))),a=[].concat(d()(new o.a(a))),console.log(a),this.autoAddress=t.map(function(t){return{text:t,value:t}}),this.autoIp=e.map(function(t){return{text:t,value:t}}),this.autoTag=a.map(function(t){return{text:t,value:t}})},handleChangeState:function(){var t=f()(p.a.mark(function t(e){var a,s;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i={id:e.id},m.a.post("/api/changeState",{id:i.id});case 3:a=t.sent,1!==(s=a.data).state?this.$message({type:"error",message:s.msg}):(this.$message({type:e.active?"success":"warning",message:e.active?"已开启":"已关闭"}),this.data=s.data,this.updateFilter()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}var i},t,this,[[0,8]])}));return function(e){return t.apply(this,arguments)}}(),handleSubmitAdd:function(){var t=f()(p.a.mark(function t(){var e,a,s,i,r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.address,a=this.ip,s=this.tags,t.next=4,n={address:e,ip:a,tags:s},m.a.post("/api/addHost",{address:n.address,ip:n.ip,tags:n.tags});case 4:i=t.sent,1===(r=i.data).state?(this.$message({type:"success",message:"添加成功"}),this.addModal=!1,this.data=r.data,this.updateFilter()):this.$message({type:"error",message:r.msg}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}var n},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),handleClickDelete:function(){var t=f()(p.a.mark(function t(e){var a=this;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{this.$confirm("确认要删除该条host吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(f()(p.a.mark(function t(){var s,i,r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.id,t.next=3,n={id:s},m.a.post("/api/deleteHost",{id:n.id});case 3:i=t.sent,1===(r=i.data).state?(a.$message({type:"success",message:"删除成功"}),a.data=r.data,a.updateFilter()):a.$message({type:"error",message:"错误"});case 6:case"end":return t.stop()}var n},t,a)}))).catch(function(){})}catch(t){console.error(t)}case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),handleClickEdit:function(){var t=f()(p.a.mark(function t(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.address=e.address,this.ip=e.ip,this.tags=e.tags,this.id=e.id,this.editModal=!0;case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),handleClickAdd:function(){this.address="",this.tags=[],this.ip="",this.addModal=!0},handleSubmitEdit:function(){var t=f()(p.a.mark(function t(){var e,a,s,i,r,n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.address,a=this.ip,s=this.id,i=this.tags,t.next=4,l={address:e,ip:a,id:s,tags:i},m.a.post("/api/editHost",{id:l.id,address:l.address,ip:l.ip,tags:l.tags});case 4:r=t.sent,1===(n=r.data).state?(this.$message({type:"success",message:"修改成功"}),this.editModal=!1,this.data=n.data,this.updateFilter()):this.$message({type:"error",message:n.msg}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}var l},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),addressFilterHandler:function(t,e,a){return e.address===t},ipFilterHandler:function(t,e,a){return e.ip===t},tagFilterHandler:function(t,e,a){return console.log(t),e.tags.indexOf(t)>=0},tagFilterChange:function(t,e){console.log(t),console.log(e)},querySearchAddress:function(t,e){var a=this.autoAddress;e(t?a.filter(this.createFilter(t)):a)},querySearchIp:function(t,e){var a=this.autoIp;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleClickAddHostsFile:function(){this.hostsFile="",this.addHostsFileModal=!0},handleSubmitHostsFile:function(){var t=f()(p.a.mark(function t(){var e,a,s;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.hostsFile){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,i={cont:e},m.a.post("/api/importHosts",{cont:i.cont});case 6:a=t.sent,1===(s=a.data).state?(this.data=s.data,this.addHostsFileModal=!1,this.hostsFile="",this.updateFilter()):this.$message({type:"error",message:s.msg}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:console.log(this.hostsFile);case 15:case"end":return t.stop()}var i},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}(),handleClickCopy:function(){this.$message({type:"success",message:"已复制到剪切板"})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"contWrap",staticClass:"hostsWrap"},[a("div",{ref:"hostsTop",staticStyle:{overflow:"hidden"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleClickAdd}},[t._v("新增host")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"small"},on:{click:t.handleClickAddHostsFile}},[t._v("导入本地hosts文件")]),t._v(" "),a("div",{staticClass:"hostsDivider"})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"active",label:"State",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{on:{change:function(a){t.handleChangeState(e.row)}},model:{value:e.row.active,callback:function(a){t.$set(e.row,"active",a)},expression:"scope.row.active"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"Address",filters:t.autoAddress,"filter-method":t.addressFilterHandler,"filter-placement":"bottom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"Ip",filters:t.autoIp,"filter-method":t.ipFilterHandler,"filter-placement":"bottom"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tags",label:"Tag",filters:t.autoTag,"filter-method":t.tagFilterHandler,"filter-multiple":!1,"filter-placement":"bottom"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,function(e,s){return a("el-tag",{key:s,staticStyle:{"margin-right":"5px"},attrs:{size:"small"}},[t._v("\n          "+t._s(e)+"\n        ")])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Operation",width:"268"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.handleClickEdit(e.row)}}},[t._v("\n          编辑\n        ")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.handleClickDelete(e.row)}}},[t._v("\n          删除\n        ")]),t._v(" "),a("el-button",{staticClass:"copyBtn",attrs:{type:"primary","data-clipboard-text":e.row.ip+" "+e.row.address,size:"small"},on:{click:t.handleClickCopy}},[t._v("\n          复制到剪切板\n        ")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增host",visible:t.addModal,width:"550px",closeOnClickModal:!1},on:{"update:visible":function(e){t.addModal=e}}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{margin:"10px 0",width:"100%"},attrs:{"fetch-suggestions":t.querySearchAddress,placeholder:"请输入地址",clearable:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),t._v(" "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{margin:"10px 0",width:"100%"},attrs:{"fetch-suggestions":t.querySearchIp,placeholder:"请输入ip",clearable:""},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}}),t._v(" "),a("el-select",{staticStyle:{margin:"10px 0",width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择标签"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}},t._l(t.autoTag,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.addModal=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",disabled:!t.address||!t.ip},on:{click:t.handleSubmitAdd}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑host",visible:t.editModal,width:"550px",closeOnClickModal:!1},on:{"update:visible":function(e){t.editModal=e}}},[a("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),t._v(" "),a("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:"请输入ip"},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}}),t._v(" "),a("el-select",{staticStyle:{margin:"10px 0",width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择标签"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}},t._l(t.autoTag,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.editModal=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleSubmitEdit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"导入hosts文件",visible:t.addHostsFileModal,width:"550px"},on:{"update:visible":function(e){t.addHostsFileModal=e}}},[a("el-alert",{attrs:{title:"已添加过的hosts将不会被导入",type:"warning",closable:!1,"show-icon":""}}),t._v(" "),a("el-input",{staticStyle:{margin:"10px 0"},attrs:{type:"textarea",rows:"12",placeholder:"请将本地hosts文件内容贴入","spell-check":"false",resize:"none"},model:{value:t.hostsFile,callback:function(e){t.hostsFile=e},expression:"hostsFile"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.addHostsFileModal=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",disabled:!t.hostsFile},on:{click:t.handleSubmitHostsFile}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(y,k,!1,function(t){a("oZt4"),a("NAuN")},"data-v-035e421b",null).exports;s.default.use(n.a);var x=new n.a({routes:[{path:"/"},{path:"/changeHosts",component:w}]}),_=a("zL8q"),F=a.n(_);a("tvR6");s.default.use(F.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:x,components:{App:r},template:"<App/>"})},oZt4:function(t,e){},rFl7:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d3750048f66da5ba541d.js.map